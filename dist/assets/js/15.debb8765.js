(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{426:function(t,r,a){t.exports=a.p+"assets/img/java_random_slow-1.2aac462f.png"},460:function(t,r,a){"use strict";a.r(r);var e=a(62),o=Object(e.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"jvm产生取随机数在linux下性能低下问题的解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jvm产生取随机数在linux下性能低下问题的解决方案"}},[t._v("#")]),t._v(" jvm产生取随机数在Linux下性能低下问题的解决方案")]),t._v(" "),e("p",[t._v("2016-07-13")]),t._v(" "),e("h2",{attrs:{id:"问题描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),e("p",[t._v("如果你有以下的现象，可以考虑是这个问题：")]),t._v(" "),e("p",[t._v("在linux下，如果你使用 Java.security 包中的方法（比如SecureKeyFactory.generateSecret()），会发现它出奇的慢，有时候甚至是半僵死在那里。\nHTTPS加密时，建立连接有时候比较慢\n建立oracle数据库连接比较慢\ntomcat启动慢")]),t._v(" "),e("h2",{attrs:{id:"方法1-修改java-security配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法1-修改java-security配置"}},[t._v("#")]),t._v(" 方法1：修改java.security配置")]),t._v(" "),e("p",[t._v("有两个方法解决这个问题")]),t._v(" "),e("ol",[e("li",[t._v("编辑${java.home}/jre/lib/security/java.security，找到securerandom.source，把它的值改成(默认值file:/dev/urandom，效果很差）")])]),t._v(" "),e("p",[t._v("securerandom.source=file:/dev/./urandom")]),t._v(" "),e("p",[t._v("请注意：这个增加./的方式，是因为jdk有bug（详情见这里： "),e("a",{attrs:{href:"http://wiki.apache.org/tomcat/HowTo/FasterStartUp",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://wiki.apache.org/tomcat/HowTo/FasterStartUp"),e("OutboundLink")],1),t._v(" ）(jdk bug ： "),e("a",{attrs:{href:"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6521844",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6521844"),e("OutboundLink")],1),t._v(" )")]),t._v(" "),e("p",[e("img",{attrs:{src:a(426),alt:"java_random_slow"}})]),t._v(" "),e("h2",{attrs:{id:"方法2-安装rng-tools"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法2-安装rng-tools"}},[t._v("#")]),t._v(" 方法2：安装rng-tools")]),t._v(" "),e("p",[t._v("[root@linux ~]# yum install rng-tools")]),t._v(" "),e("p",[t._v("[root@linux ~]# echo ‘EXTRAOPTIONS=”-i -o /dev/random -r /dev/urandom -t 10 -W 2048″‘ > /etc/sysconfig/rngd")]),t._v(" "),e("p",[t._v("[root@linux ~]# chkconfig rngd on")]),t._v(" "),e("p",[t._v("[root@linux ~]# service rngd restart")]),t._v(" "),e("p",[t._v("参考："),e("a",{attrs:{href:"http://development.adaptris.com/~lchan/blog/2012/06/15/slow-java-crypto-performance-on-linux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://development.adaptris.com/~lchan/blog/2012/06/15/slow-java-crypto-performance-on-linux/"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"扩展阅读"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#扩展阅读"}},[t._v("#")]),t._v(" 扩展阅读")]),t._v(" "),e("p",[t._v("/dev/urandom 不得不说的故事  "),e("a",{attrs:{href:"http://www.tuicool.com/articles/2qMZZvV",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.tuicool.com/articles/2qMZZvV"),e("OutboundLink")],1),e("br"),t._v("\n（ "),e("RouterLink",{attrs:{to:"/notes/migrated/2016-07-13-random_urandom_about/"}},[t._v("本站备份")]),t._v(" ）")],1),t._v(" "),e("p",[t._v("JVM上的随机数与熵池策略  "),e("a",{attrs:{href:"http://ifeve.com/jvm-random-and-entropy-source/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://ifeve.com/jvm-random-and-entropy-source/"),e("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=o.exports}}]);