<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>linux命令几个 | Kyle Tang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" href="/favorite.ico" type="image/jpg">
    <meta name="description" content="Today is a good day.">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.b6876dc4.js" as="script"><link rel="preload" href="/assets/js/2.d4ec38ee.js" as="script"><link rel="preload" href="/assets/js/13.0af49999.js" as="script"><link rel="prefetch" href="/assets/js/10.4474183b.js"><link rel="prefetch" href="/assets/js/11.853205be.js"><link rel="prefetch" href="/assets/js/12.dce02ad7.js"><link rel="prefetch" href="/assets/js/14.0dbb6ff0.js"><link rel="prefetch" href="/assets/js/15.debb8765.js"><link rel="prefetch" href="/assets/js/16.59ad786c.js"><link rel="prefetch" href="/assets/js/17.9f3e1f65.js"><link rel="prefetch" href="/assets/js/18.0bd5fd6a.js"><link rel="prefetch" href="/assets/js/19.279cd21a.js"><link rel="prefetch" href="/assets/js/20.7e88304f.js"><link rel="prefetch" href="/assets/js/21.3500451c.js"><link rel="prefetch" href="/assets/js/22.10e3ea50.js"><link rel="prefetch" href="/assets/js/23.66f80426.js"><link rel="prefetch" href="/assets/js/24.0e579fec.js"><link rel="prefetch" href="/assets/js/25.19af61b7.js"><link rel="prefetch" href="/assets/js/26.0dd76792.js"><link rel="prefetch" href="/assets/js/27.82e62380.js"><link rel="prefetch" href="/assets/js/28.6e11add1.js"><link rel="prefetch" href="/assets/js/29.cd1c4636.js"><link rel="prefetch" href="/assets/js/3.39bcfeaa.js"><link rel="prefetch" href="/assets/js/30.dd69bc5e.js"><link rel="prefetch" href="/assets/js/31.2b48ade5.js"><link rel="prefetch" href="/assets/js/32.f059b747.js"><link rel="prefetch" href="/assets/js/33.ab77f833.js"><link rel="prefetch" href="/assets/js/34.50e3bd81.js"><link rel="prefetch" href="/assets/js/35.9505a549.js"><link rel="prefetch" href="/assets/js/4.273d8741.js"><link rel="prefetch" href="/assets/js/5.ca2e4e56.js"><link rel="prefetch" href="/assets/js/6.a3b9b27d.js"><link rel="prefetch" href="/assets/js/7.a5917f45.js"><link rel="prefetch" href="/assets/js/8.047b700e.js"><link rel="prefetch" href="/assets/js/9.b3fe406b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Kyle Tang's blog" class="logo"> <span class="site-name can-hide">Kyle Tang's blog</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小工具" class="dropdown-title"><span class="title">小工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="小工具" class="mobile-dropdown-title"><span class="title">小工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zxgj.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用链接" class="dropdown-title"><span class="title">常用链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用链接" class="mobile-dropdown-title"><span class="title">常用链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.oschina.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开源中国
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bootcss.com/p/git-guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  git简易指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的小伙伴" class="dropdown-title"><span class="title">小伙伴</span> <span class="arrow down"></span></button> <button type="button" aria-label="我的小伙伴" class="mobile-dropdown-title"><span class="title">小伙伴</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://zhangqiang.work/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  兔子不咬人
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小工具" class="dropdown-title"><span class="title">小工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="小工具" class="mobile-dropdown-title"><span class="title">小工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zxgj.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线工具2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用链接" class="dropdown-title"><span class="title">常用链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用链接" class="mobile-dropdown-title"><span class="title">常用链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.oschina.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  开源中国
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bootcss.com/p/git-guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  git简易指南
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的小伙伴" class="dropdown-title"><span class="title">小伙伴</span> <span class="arrow down"></span></button> <button type="button" aria-label="我的小伙伴" class="mobile-dropdown-title"><span class="title">小伙伴</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://zhangqiang.work/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  兔子不咬人
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>linux命令几个</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#善用命令组合-grep-sort-cut-uniq" class="sidebar-link">善用命令组合（grep,sort,cut,uniq)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#sort命令多列排序" class="sidebar-link">sort命令多列排序</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#iptables防火墙设置-限制访问" class="sidebar-link">iptables防火墙设置：限制访问</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#linux按连接状态分组统计连接数" class="sidebar-link">linux按连接状态分组统计连接数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#ssh端口转发" class="sidebar-link">SSH端口转发</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#vim正则表达式-贪婪模式与非贪婪" class="sidebar-link">VIM正则表达式，贪婪模式与非贪婪</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#grep实战-查找所有type-password的input的name" class="sidebar-link">grep实战：查找所有type=password的input的name</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#给vps增加swap" class="sidebar-link">给vps增加swap</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#curl检测网址访问是否返回http状态码200" class="sidebar-link">curl检测网址访问是否返回HTTP状态码200</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#配置debian的locales区域设置" class="sidebar-link">配置debian的locales区域设置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notes/migrated/2016-07-04-linux_cmd_combination.html#ubuntu-16-04安装有道词典1-1-0" class="sidebar-link">Ubuntu 16.04安装有道词典1.1.0</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux命令几个"><a href="#linux命令几个" class="header-anchor">#</a> linux命令几个</h1> <h2 id="善用命令组合-grep-sort-cut-uniq"><a href="#善用命令组合-grep-sort-cut-uniq" class="header-anchor">#</a> 善用命令组合（grep,sort,cut,uniq)</h2> <p>2016.07.04</p> <p>先看一段数据,  文件名 sys.log</p> <div class="language- extra-class"><pre class="language-text"><code>[INFO] 10:30:01 [OrderAdd] – id=0001,customerid=C0001,buyOrSell=2,qty=3
[DEBUG] 10:30:02 [OrderUpdate] – id=0001,customerid=C0001,buyOrSell=2,qty=3
[DEBUG] 10:30:03 [OrderDel] – id=0001,customerid=C0001,buyOrSell=2,qty=3
[INFO] 10:30:04 [OrderAdd] – id=0002,customerid=C0002,buyOrSell=2,qty=3
[DEBUG] 10:30:05 [OrderAdd] – id=0003,customerid=C0003,buyOrSell=2,qty=3
[ERROR] 10:30:06 [OrderUpdate] – id=0003,customerid=C0003,buyOrSell=2,qty=3
[INFO] 10:30:07 [OrderProcess] – id=0002,customerid=C0002,buyOrSell=2,qty=3
[ERROR] 10:30:08 [OrderUpdate] – id=0003,customerid=C0003,buyOrSell=2,qty=3
[DEBUG] 10:30:09 [OrderDel] – id=0002,customerid=C0002,buyOrSell=2,qty=3
[ERROR] 10:30:10 [OrderDel] – id=0003,customerid=C0003,buyOrSell=2,qty=3
</code></pre></div><p>场景1：检索所有ERROR日志信息</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log | grep 'ERROR'
</code></pre></div><p>场景2：检索所有DEBUG或ERROR日志信息</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log | grep -E 'DEBUG|ERROR'
</code></pre></div><p>场景3：id都出现了那些</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log | cut -d ','  -f 1 | cut -d '=' -f 2 | sort | uniq
#或者使用grep精确匹配，当然，上面的cut直接截取效率更高
cat sys.log | grep -P -o 'id=.*?,' | cut -d &quot;,&quot; -f1 | cut -d &quot;=&quot; -f2 | sort | uniq
</code></pre></div><p>场景4：id都出现了那些，每个出现多少次</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log |  cut -d ','  -f 1 | cut -d '=' -f 2 | sort | uniq -c
</code></pre></div><p>场景5：id都出现了那些，每个出现多少次，并按次数从大到小排序</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log | cut -d ','  -f 1 | cut -d '=' -f 2 | sort | uniq -c | sort -n -k1 -r
</code></pre></div><p>场景6：customerid都出现了那些，每个出现多少次，并按次数从大到小排序</p> <div class="language- extra-class"><pre class="language-text"><code>cat sys.log | grep 'customerid' | cut -d ','  -f 2 | sed 's/customerid=//g' | sort | uniq -c | sort -n -k1 -r
</code></pre></div><h2 id="sort命令多列排序"><a href="#sort命令多列排序" class="header-anchor">#</a> sort命令多列排序</h2> <p>2018.01.30</p> <p>把文本1.txt，按第二列正序、第一列倒序的方式排序</p> <div class="language- extra-class"><pre class="language-text"><code>[root@localhost ~]# cat 1.txt
a 1 c
d 3 d
b 1 a
c 3 a

[root@localhost ~]# cat 1.txt | sort -s -t&quot;\t&quot; -k2,2 -k1r,1
sort: 多字符标签&quot;\\t&quot;

[root@localhost ~]# cat 1.txt | sort -s -t'\t' -k2,2 -k1r,1
sort: 多字符标签&quot;\\t&quot;

[root@localhost ~]# cat 1.txt | sort -s -t$&quot;\t&quot; -k2,2 -k1r,1
sort: 多字符标签&quot;\\t&quot;

[root@localhost ~]# cat 1.txt | sort -s -t$'\t' -k2,2 -k1r,1
b 1 a
a 1 c
d 3 d
c 3 a
</code></pre></div><h2 id="iptables防火墙设置-限制访问"><a href="#iptables防火墙设置-限制访问" class="header-anchor">#</a> iptables防火墙设置：限制访问</h2> <p>2017.09.01</p> <div class="language- extra-class"><pre class="language-text"><code>#禁止访问192.168.50.73的22以外端口。
iptables -t filter -A OUTPUT -p tcp --dst 192.168.50.73 --dport 22 -j ACCEPT
iptables -t filter -A OUTPUT -p tcp --dst 192.168.50.73 -j DROP
</code></pre></div><h2 id="linux按连接状态分组统计连接数"><a href="#linux按连接状态分组统计连接数" class="header-anchor">#</a> linux按连接状态分组统计连接数</h2> <p>2017.05.16</p> <div class="language- extra-class"><pre class="language-text"><code>netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' 

TIME_WAIT 48
CLOSE_WAIT 2228
ESTABLISHED 86
</code></pre></div><p>附上状态图一张：
<img src="/assets/img/TCP-state.aa298239.jpg" alt="tcp状态图"></p> <h2 id="ssh端口转发"><a href="#ssh端口转发" class="header-anchor">#</a> SSH端口转发</h2> <p>2017.04.18</p> <p>看参考链接吧： <a href="https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/" target="_blank" rel="noopener noreferrer">实战 SSH 端口转发<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://gist.github.com/suziewong/4413491" target="_blank" rel="noopener noreferrer">SSH端口转发<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>    -C  压缩数据传输
    -f  后台登录用户名密码
    -N  不执行shell[与 -g 合用]
    -g  允许打开的端口让远程主机访问        
    -L  本地端口转发
    -R  远程端口转发
    -D  动态端口转发
    -p  ssh 端口
</code></pre></div><p>备忘：</p> <p>（1）本地转发：</p> <div class="language- extra-class"><pre class="language-text"><code>ssh -CNfg -L &lt;监听端口&gt;:&lt;forward-host&gt;:&lt;forward-port&gt;  &lt;username&gt;@&lt;ssh-server-host&gt;
转发结果： 当访问ssh客户端本地的监听端口  —&gt;  ssh-server-host能访问到的forward-host:forward-port
</code></pre></div><p>（2）远程转发：</p> <div class="language- extra-class"><pre class="language-text"><code>ssh -CNfg -R &lt;监听端口&gt;:&lt;forward-host&gt;:&lt;forward-port&gt;  &lt;username&gt;@&lt;ssh-server-host&gt;
转发结果： 当访问 ssh-server-host:监听端口  —&gt;  ssh客户端能访问到的 forward-host:forward-port
</code></pre></div><p>注意：ssh服务端需要开启，/etc/ssh/sshd_config 配置 GatewayPorts yes，重启sshd服务，然后重新建立ssh连接，然后设置转发</p> <p>（3）动态转发：</p> <div class="language- extra-class"><pre class="language-text"><code>ssh -CNfg -D &lt;监听端口&gt;  &lt;username&gt;@&lt;ssh-server-host&gt;
</code></pre></div><p>转发结果：实现了sock5代理</p> <h2 id="vim正则表达式-贪婪模式与非贪婪"><a href="#vim正则表达式-贪婪模式与非贪婪" class="header-anchor">#</a> VIM正则表达式，贪婪模式与非贪婪</h2> <p>2017.03.21</p> <div class="language- extra-class"><pre class="language-text"><code>name=&quot;password&quot; id=&quot;password&quot;


贪婪，使用*
/name=&quot;.*&quot;

匹配结果：name=&quot;password&quot; id=&quot;password&quot;

非贪婪，使用\{-}
/name=&quot;.\{-}&quot;

非贪婪匹配结果：name=&quot;password&quot;
</code></pre></div><h2 id="grep实战-查找所有type-password的input的name"><a href="#grep实战-查找所有type-password的input的name" class="header-anchor">#</a> grep实战：查找所有type=password的input的name</h2> <p>2017-03-21</p> <div class="language- extra-class"><pre class="language-text"><code>#找出当前目录及子目录下所有jsp文件，并过滤出type=password的表单记录，将结果输出到文件1.out
find . -name &quot;*.jsp&quot; | xargs grep -E &quot;(type=\&quot;password\&quot;|type=password|type='password')&quot; &gt; 1.out
#对结果进行匹配，找出所有name，并排序去重复
cat 1.out | grep -P -o 'name=&quot;.+?&quot;' | sort | uniq 
</code></pre></div><p>grep 的-P参数是正则表达式，并使用非贪婪模式，-E是正则表达式，贪婪模式
结果很完美</p> <div class="language- extra-class"><pre class="language-text"><code>name=&quot;bankCardPassword&quot;
name=&quot;bankPassword&quot;
name=&quot;cfmPassword&quot;
name=&quot;confirmPassword&quot;
name=&quot;confirmpwd&quot;
name=&quot;entity.password&quot;
name=&quot;newpwd&quot;
name=&quot;newPwd&quot;
name=&quot;newpwd1&quot;
name=&quot;obj.old&quot;
name=&quot;obj.password&quot;
name=&quot;obj.phonePWD&quot;
name=&quot;oldpass&quot;
name=&quot;oldPassword&quot;
name=&quot;oldpwd&quot;
name=&quot;oldPwd&quot;
name=&quot;password&quot;
name=&quot;passWord&quot;
name=&quot;password1&quot;
name=&quot;password2&quot;
name=&quot;password3&quot;
name=&quot;passwords&quot;
name=&quot;phonePWD1&quot;
name=&quot;pwd&quot;
name=&quot;pwd1&quot;
name=&quot;rnewpwd&quot;
name=&quot;specialforAudit.password1&quot;
name=&quot;tpassword&quot;
name=&quot;truePassword&quot;
name=&quot;upassword&quot;
</code></pre></div><h2 id="给vps增加swap"><a href="#给vps增加swap" class="header-anchor">#</a> 给vps增加swap</h2> <p>2016.08.24</p> <p>有的vps没有swap，可以通过下面的方法增加一个</p> <div class="language- extra-class"><pre class="language-text"><code>dd if=/dev/zero of=swap.file bs=1024 count=1024000
mkswap swap.file
swapon swap.file
echo '/root/swap.file swap swap defaults 0 1' &gt;&gt; /etc/fstab
</code></pre></div><h2 id="curl检测网址访问是否返回http状态码200"><a href="#curl检测网址访问是否返回http状态码200" class="header-anchor">#</a> curl检测网址访问是否返回HTTP状态码200</h2> <div class="language- extra-class"><pre class="language-text"><code>curl -k -o /dev/null -s -m 10 --connect-timeout 10 -w %{http_code} &quot;https://www.baidu.com&quot;
</code></pre></div><p>说明：-k 表示忽略证书警告信息</p> <h2 id="配置debian的locales区域设置"><a href="#配置debian的locales区域设置" class="header-anchor">#</a> 配置debian的locales区域设置</h2> <p>locale -a 看不到需要的语言，执行</p> <p>dpkg-reconfigure locales</p> <p>选择后，按tab选择ok，保存等待即可。</p> <h2 id="ubuntu-16-04安装有道词典1-1-0"><a href="#ubuntu-16-04安装有道词典1-1-0" class="header-anchor">#</a> Ubuntu 16.04安装有道词典1.1.0</h2> <p>Ubuntu 16.04安装有道词典官方1.1.0</p> <p>下载地址：http://codown.youdao.com/cidian/linux/youdao-dict_1.1.0-0-deepin_amd64.deb</p> <p>安装：</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo dpkg -i –force-depends youdao-dict_1.1.0-0-deepin_amd64.deb
$ sudo apt-get -f install
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b6876dc4.js" defer></script><script src="/assets/js/2.d4ec38ee.js" defer></script><script src="/assets/js/13.0af49999.js" defer></script>
  </body>
</html>
