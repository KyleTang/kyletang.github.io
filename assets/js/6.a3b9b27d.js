(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{443:function(t,r,a){t.exports=a.p+"assets/img/1.08b0ecfb.png"},444:function(t,r,a){t.exports=a.p+"assets/img/2.d0178a9e.png"},445:function(t,r,a){t.exports=a.p+"assets/img/3.d8e6f0b9.png"},475:function(t,r,a){"use strict";a.r(r);var s=a(62),e=Object(s.a)({},(function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"使用tcpdump抓取指定ip到服务端口的数据包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用tcpdump抓取指定ip到服务端口的数据包"}},[t._v("#")]),t._v(" 使用tcpdump抓取指定ip到服务端口的数据包")]),t._v(" "),s("p",[t._v("2017.12.25")]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("有时候需要在服务器端抓包，来分析是否收到客户的请求，网络应答是什么样的。")]),t._v(" "),s("p",[t._v("linux服务器上可使用tcpdump进行抓包，并存储为wireshark的数据包文件，然后用wireshark打开分析。")]),t._v(" "),s("p",[t._v("如果需要实时查看分析结果，可以查看这篇文章 （利用Wireshark和tcpdump在windows上远程实时分析Linux上的数据包  "),s("a",{attrs:{href:"https://blog.kyletang.work/2016/11/09/wireshark-tcpdump-linux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.kyletang.work/2016/11/09/wireshark-tcpdump-linux/"),s("OutboundLink")],1),t._v(" ）")]),t._v(" "),s("p",[t._v("如果没用过wireshark，可以查看这篇文章（Wireshark网络抓包工具入门  "),s("a",{attrs:{href:"https://blog.kyletang.work/2016/07/07/wireshark-getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.kyletang.work/2016/07/07/wireshark-getting-started/"),s("OutboundLink")],1),t._v(" ）")]),t._v(" "),s("h2",{attrs:{id:"查看服务器的网卡名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看服务器的网卡名"}},[t._v("#")]),t._v(" 查看服务器的网卡名")]),t._v(" "),s("p",[t._v("已知服务器的ip为172.16.2.94，执行 ip addr 命令，得到网卡名为 eth0")]),t._v(" "),s("p",[s("img",{attrs:{src:a(443),alt:"img1"}})]),t._v(" "),s("h2",{attrs:{id:"执行命令抓包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行命令抓包"}},[t._v("#")]),t._v(" 执行命令抓包")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("tcpdump tcp -i eth0 -t -s 0 -c 100 and port 80 and host 172.16.1.120 -w x.cap\n")])])]),s("p",[t._v("eth0是网卡名")]),t._v(" "),s("p",[t._v("80是服务端的监听端口")]),t._v(" "),s("p",[t._v("172.16.1.120 是客户端的ip")]),t._v(" "),s("p",[t._v("x.cap 是存储数据包的文件名")]),t._v(" "),s("p",[t._v("-c 100 : 只抓取100个数据包，提前结束，请使用ctrl+C")]),t._v(" "),s("p",[s("img",{attrs:{src:a(444),alt:"img2"}})]),t._v(" "),s("p",[t._v("客户端发送请求，确认请求完成之后，在命令行ctrl+c，终止抓包")]),t._v(" "),s("p",[t._v("补充（通过wireshark实时分析）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('D:\\putty\\plink.exe -ssh -pw mypassword root@172.16.2.94 /usr/sbin/tcpdump tcp -i eth0 -t -s 0 -c 100 and port 80 and host 172.16.1.120 -w - | "C:\\Program Files\\Wireshark\\wireshark.exe" -k -i -\n')])])]),s("p",[t._v("第三步：使用wireshark分析\n打开x.cap文件，可以看到数据包分析结果")]),t._v(" "),s("p",[s("img",{attrs:{src:a(445),alt:"img3"}})])])}),[],!1,null,null,null);r.default=e.exports}}]);